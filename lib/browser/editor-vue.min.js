var Editor=function(n){"use strict";var e=function(){return(e=Object.assign||function n(e){for(var o,t=1,i=arguments.length;t<i;t++)for(var r in o=arguments[t])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e}).apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var o,t,i=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],r=function(n){return -1!==i.map(function(n){return n.toLowerCase()}).indexOf(n.toLowerCase())},a=function(n,e,o){Object.keys(e).filter(r).forEach(function(t){var i=e[t];"function"==typeof i&&("onInit"===t?i(n,o):o.on(t.substring(2),function(n){return i(n,o)}))})},u=function(e,o,t,i){var r=e.modelEvents?e.modelEvents:null,a=Array.isArray(r)?r.join(" "):r;n.watch(i,function(n,o){t&&"string"==typeof n&&n!==o&&n!==t.getContent({format:e.outputFormat})&&t.setContent(n)}),t.on(a||"change input undo redo",function(){o.emit("update:modelValue",t.getContent({format:e.outputFormat}))})},l=function(n,e,o,t,i,r){t.setContent(r()),o.attrs["onUpdate:modelValue"]&&u(e,o,t,i),a(n,o.attrs,t)},c=0,s=function(n){var e=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++c+String(e)},d=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},f=function(n,e){return d(n).concat(d(e))},p=function(n){var e;return"function"==typeof(null===(e=n.options)||void 0===e?void 0:e.set)&&n.options.isRegistered("disabled")},v=function(){return{listeners:[],scriptId:s("tiny-script"),scriptLoaded:!1}},m=(o=v(),t=function(n,e,o,t){var i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=o;var r=function(){i.removeEventListener("load",r),t()};i.addEventListener("load",r),e.head&&e.head.appendChild(i)},{load:function(n,e,i){o.scriptLoaded?i():(o.listeners.push(i),n.getElementById(o.scriptId)||t(o.scriptId,n,e,function(){o.listeners.forEach(function(n){return n()}),o.scriptLoaded=!0}))},reinitialize:function(){o=v()}}),y=function(){var n="undefined"!=typeof window?window:global;return n&&n.tinymce?n.tinymce:null},g={selector:void 0,target:void 0},C=function(n,e){var o;"function"==typeof(null===(o=n.mode)||void 0===o?void 0:o.set)?n.mode.set(e):n.setMode(e)};return n.defineComponent({props:{apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,readonly:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}},setup:function(o,t){var i=o.init?e(e({},o.init),g):e({},g),r=n.toRefs(o),a=r.disabled,u=r.readonly,c=r.modelValue,d=r.tagName,v=n.ref(null),h=null,$=o.id||s("tiny-vue"),b=o.init&&o.init.inline||o.inline,S=!!t.attrs["onUpdate:modelValue"],E=!0,D=o.initialValue?o.initialValue:"",w="",M=function(n){return S?function(){return(null==c?void 0:c.value)?c.value:""}:function(){return n?D:w}},P=function(){var n,r=M(E),a=e(e({},i),{disabled:o.disabled,readonly:o.readonly,target:v.value,plugins:f(i.plugins,o.plugins),toolbar:o.toolbar||i.toolbar,inline:b,license_key:o.licenseKey,setup:function(n){p(h=n)||!0!==o.disabled||C(h,"readonly"),n.on("init",function(e){return l(e,o,t,n,c,r)}),"function"==typeof i.setup&&i.setup(n)}});null!==(n=v.value)&&"textarea"===n.tagName.toLowerCase()&&(v.value.style.visibility=""),y().init(a),E=!1};n.watch(u,function(n){null!==h&&C(h,n?"readonly":"design")}),n.watch(a,function(n){null!==h&&(p(h)?h.options.set("disabled",n):C(h,n?"readonly":"design"))}),n.watch(d,function(e){var o;h&&(S||(w=h.getContent()),null===(o=y())||void 0===o||o.remove(h),n.nextTick(function(){return P()}))}),n.onMounted(function(){if(null!==y())P();else if(v.value&&v.value.ownerDocument){var n,e=null==(n=o.tinymceScriptSrc)?"/js/components/editor/editor.min.js":o.tinymceScriptSrc;m.load(v.value.ownerDocument,e,P)}}),n.onBeforeUnmount(function(){null!==y()&&y().remove(h)}),b||(n.onActivated(function(){E||P()}),n.onDeactivated(function(){var n;h&&(S||(w=h.getContent()),null===(n=y())||void 0===n||n.remove(h))}));var U=function(o){var t;h&&(w=h.getContent(),null===(t=y())||void 0===t||t.remove(h),i=e(e(e({},i),o),g),n.nextTick(function(){return P()}))};return t.expose({rerender:U,getEditor:function(){return h}}),function(){var e,t,i,r,a,u,l;return b?(e=n.h,t=$,i=v,e((r=o.tagName)||"div",{id:t,ref:i})):(a=n.h,u=$,a("textarea",{id:u,visibility:"hidden",ref:l=v}))}}})}(Vue);